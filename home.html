<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主頁 | Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- 1. 全局變量 --- */
        :root {
            --bg-color: #ffffff;
            --text-color: #1a1a1a;
            --accent-color: #000000;
            --secondary-text: #666666;
            
            /* 
               幾何設置:
               skewX(-15deg) -> 形狀呈現 \ (頂部在左，底部在右)
               如果你想要 / 形狀，改成 15deg
            */
            --skew-angle: -15deg; 
            --content-angle: 15deg; /* 用來抵消內容傾斜 */
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #000000;
                --text-color: #e5e5e5;
                --accent-color: #ffffff;
                --secondary-text: #888888;
            }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Noto Serif TC', serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            width: 100vw;
            overflow: hidden; 
            display: flex;
            opacity: 0; 
            animation: pageFadeIn 1s cubic-bezier(0.25, 1, 0.5, 1) forwards;
        }

        @keyframes pageFadeIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* --- 2. 左側區域 (豎排佈局) --- */
        .left-section {
            width: 30%;
            height: 100%;
            padding: 60px 40px;
            display: flex;
            flex-direction: row; /* 名字和格言並排 */
            justify-content: center;
            align-items: center;
            z-index: 50; /* 確保在最上層 */
            background: transparent;
            gap: 40px; /* 名字和格言之間的間距 */
        }

        /* 豎排文字通用設置 */
        .vertical-text {
            writing-mode: vertical-rl; /* 從上到下，從右到左 */
            text-orientation: upright; /* 文字直立 */
            letter-spacing: 0.3em;
            user-select: none;
        }

        .my-name {
            font-size: 2.5rem;
            font-weight: 700;
            border-left: 2px solid var(--accent-color); /* 線條在名字左側 */
            padding-left: 20px;
            display: flex;
            letter-spacing: 0.2em;
            align-items: center; /* 豎向居中 */
            writing-mode: vertical-rl;
        }

        /* 格言容器 */
        .quote-wrapper {
            height: 60%;
            position: relative;
            cursor: pointer;
            width: 60px; /* 限制寬度 */
        }

        .quote-text {
            font-size: 1.1rem;
            font-weight: 300;
            line-height: 1.5;
            height: 100%;
            position: absolute;
            top: 0;
            right: 0; /* 靠右對齊 */
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 1;
            /* 豎排 */
            writing-mode: vertical-rl;
            text-orientation: upright;
        }

        /* 格言切換動畫狀態 */
        .quote-enter { opacity: 0; transform: translateX(20px); } /* 從右邊進來 */
        .quote-active { opacity: 1; transform: translateX(0); }
        .quote-exit { opacity: 0; transform: translateX(-20px); } /* 往左邊出去 */

        .quote-hint {
            position: absolute;
            bottom: -40px;
            right: 0;
            font-size: 0.7rem;
            color: var(--secondary-text);
            writing-mode: horizontal-tb; /* 提示文字橫排 */
            opacity: 0.5;
            white-space: nowrap;
        }


        /* --- 3. 右側幾何區域 --- */
        .right-section {
            width: 70%;
            height: 100%;
            position: relative;
        }

        /* 平行四邊形視窗 */
        .geo-viewport {
            position: absolute;
            background: var(--bg-color);
            border: 1.5px solid var(--accent-color);
            transform: skewX(var(--skew-angle)); /* \ 形狀 */
            overflow: hidden;
            transition: transform 0.4s ease, z-index 0s; /* z-index 瞬變 */
            /* 默認陰影 */
            box-shadow: -5px 5px 20px rgba(0,0,0,0.05);
        }

        /* 激活/懸停狀態 */
        .geo-viewport.active, .geo-viewport:hover {
            transform: skewX(var(--skew-angle)) scale(1.02);
            box-shadow: -15px 15px 40px rgba(0,0,0,0.15);
            border-color: var(--text-color);
        }

        /* 內部滾動軌道 (Vertical Scroll) 
           因為外框斜了，為了讓內容「反向」或者說「正常」顯示，
           我們只需要簡單的反向 Skew 內容即可。
           這裡為了視覺上的「錯位感」，我們保持列表是垂直滑動的，
           這樣它會與斜邊框形成交叉 (Opposite Direction)。
        */
        .geo-scroller {
            width: 120%; /* 補償寬度 */
            height: 100%;
            margin-left: -10%; /* 居中 */
            transform: skewX(var(--content-angle)*2); /* 反向擺正內容 */
            
            overflow-y: auto;
            overflow-x: hidden;
            padding: 60px 100px; /* 增加內邊距防止文字切邊 */
            
            /* 隱藏滾動條 */
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .geo-scroller::-webkit-scrollbar { display: none; }

        /* 內容佈局 */
        .box-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            display: block;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        /* 動態 (MOMENTS) */
        .moment-item {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px dashed rgba(128,128,128,0.3);
        }
        .moment-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            filter: grayscale(100%);
            transition: filter 0.4s;
            margin-bottom: 15px;
            cursor: pointer;
        }
        .geo-viewport:hover .moment-img { filter: grayscale(0%); }
        
        .moment-text {
            font-size: 0.95rem;
            line-height: 1.8;
            cursor: pointer;
            position: relative;
        }
        /* 呼吸效果 */
        @keyframes breathe {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        .moment-text:hover {
            animation: breathe 2s infinite ease-in-out;
            color: var(--secondary-text);
        }

        /* 文章 (ARTICLES) */
        .article-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(128,128,128,0.1);
            cursor: pointer;
            transition: padding 0.3s;
        }
        .article-item:hover { padding-left: 10px; padding-right: 10px; background: rgba(128,128,128,0.05); }
        .article-title { font-size: 1.1rem; font-weight: 500; }
        .article-date { font-size: 0.8rem; font-family: monospace; color: var(--secondary-text); }


        /* --- 定位與默認層級 --- */
        /* Moments 在左上方 */
        #moments-box {
            width: 45%;
            height: 50%;
            top: 10%;
            left: 10%;
            z-index: 10; 
        }

        /* Articles 在右下方 */
        #articles-box {
            width: 55%;
            height: 60%;
            bottom: 5%;
            right: 5%;
            z-index: 9;
        }

        /* 手機適配簡單處理 */
        @media (max-width: 768px) {
            body { flex-direction: column; overflow: auto; }
            .left-section { width: 100%; height: auto; flex-direction: column; padding: 40px; }
            .right-section { width: 100%; height: 80vh; }
            .my-name, .quote-wrapper { writing-mode: horizontal-tb; height: auto; width: auto; border: none; }
            .geo-viewport { transform: none !important; border: 1px solid var(--accent-color); }
            .geo-scroller { transform: none; width: 100%; margin: 0; padding: 20px; }
        }

    </style>
</head>
<body>

    <!-- 左側：豎排名字與格言 -->
    <section class="left-section">
        <div class="my-name">
            Joyance
        </div>
        
        <!-- 格言區域：點擊或滑動切換 -->
        <div class="quote-wrapper" id="quote-area">
            <div class="quote-text quote-active" id="current-quote">
                <!-- 文字由 JS 填充 -->
            </div>
            <div class="quote-hint">← SLIDE / CLICK →</div>
        </div>
    </section>

    <!-- 右側：幾何板塊 -->
    <section class="right-section">
        
        <!-- 1. MOMENTS 動態板塊 -->
        <div class="geo-viewport" id="moments-box" data-id="moments">
            <div class="geo-scroller">
                <span class="box-title">MOMENTS</span>
                
                <div class="moment-item">
                    <img src="https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?auto=format&fit=crop&w=600&q=80" class="moment-img">
                    <p class="moment-text copy-target" onclick="copyText(this)">
                        生活不是等待風暴過去，而是學會在雨中跳舞。（點擊複製我）
                    </p>
                </div>
                
                <div class="moment-item">
                    <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=600&q=80" class="moment-img">
                    <p class="moment-text copy-target" onclick="copyText(this)">
                        仰望星空，腳踏實地。
                    </p>
                </div>

                <div class="moment-item">
                    <p class="moment-text copy-target" onclick="copyText(this)">
                        純粹的文字記錄，有時候比圖像更有力量。
                    </p>
                </div>

                <!-- 佔位，防止底部遮擋 -->
                <div style="height: 100px;"></div>
            </div>
        </div>

        <!-- 2. ARTICLES 文章板塊 -->
        <div class="geo-viewport" id="articles-box" data-id="articles">
            <div class="geo-scroller">
                <span class="box-title">ARTICLES</span>
                
                <div class="article-item" onclick="openLink('post-1')">
                    <span class="article-title">幾何美學的構建</span>
                    <span class="article-date">2023.11.02</span>
                </div>
                <div class="article-item" onclick="openLink('post-2')">
                    <span class="article-title">CSS Skew 的反向邏輯</span>
                    <span class="article-date">2023.10.15</span>
                </div>
                <div class="article-item" onclick="openLink('post-3')">
                    <span class="article-title">垂直排版的藝術</span>
                    <span class="article-date">2023.09.28</span>
                </div>
                <div class="article-item" onclick="openLink('post-4')">
                    <span class="article-title">呼吸效果與交互</span>
                    <span class="article-date">2023.08.12</span>
                </div>
                <div class="article-item" onclick="openLink('post-5')">
                    <span class="article-title">舊日時光</span>
                    <span class="article-date">2023.07.01</span>
                </div>
                
                <div style="height: 100px;"></div>
            </div>
        </div>

    </section>

    <script>
        // --- 1. 格言系統 (順序播放 + 左右滑動) ---
        const quotes = [
            "於無聲處聽驚雷，於無色處見繁花。",
            "Stay hungry, stay foolish.",
            "人的一切痛苦，本質上都是對自己無能的憤怒。",
            "知行合一。",
            "代碼是寫給人看的，順便給機器運行。",
            "簡單是終極的複雜。"
        ];
        
        let quoteIndex = 0;
        const quoteEl = document.getElementById('current-quote');
        const quoteArea = document.getElementById('quote-area');
        
        // 初始化第一條
        quoteEl.innerText = quotes[0];

        function updateQuote(direction) {
            // 1. 舊文字離場
            quoteEl.classList.remove('quote-active');
            quoteEl.classList.add(direction === 'next' ? 'quote-exit' : 'quote-enter'); // 這裡可以根據方向做動畫區分，這裡簡化為統一淡出
            
            setTimeout(() => {
                // 2. 計算新索引 (循環)
                if (direction === 'next') {
                    quoteIndex = (quoteIndex + 1) % quotes.length;
                } else {
                    quoteIndex = (quoteIndex - 1 + quotes.length) % quotes.length;
                }
                
                // 3. 更新文字
                quoteEl.innerText = quotes[quoteIndex];
                
                // 4. 重置狀態準備進場
                quoteEl.classList.remove('quote-exit', 'quote-enter');
                // 強制重繪 (Reflow) 以觸發動畫
                void quoteEl.offsetWidth;
                
                // 5. 新文字進場
                quoteEl.classList.add('quote-active');
            }, 300); // 等待 CSS transition 0.3s (這裡用 JS 配合 CSS 時間)
        }

        // 點擊切換
        quoteArea.addEventListener('click', () => updateQuote('next'));

        // 左右滑動切換 (Wheel or Touch)
        let isScrolling = false;
        quoteArea.addEventListener('wheel', (e) => {
            if (isScrolling) return;
            // 橫向滾動 deltaX，或者豎向滾動 deltaY 都可以觸發，方便操作
            if (Math.abs(e.deltaY) > 20 || Math.abs(e.deltaX) > 20) {
                isScrolling = true;
                const dir = (e.deltaY > 0 || e.deltaX > 0) ? 'next' : 'prev';
                updateQuote(dir);
                setTimeout(() => isScrolling = false, 800); // 冷卻時間
            }
        });


        // --- 2. 複製功能 (Copy) ---
        async function copyText(el) {
            const text = el.innerText.replace('（點擊複製我）', '').trim();
            try {
                await navigator.clipboard.writeText(text);
                // 視覺反饋
                const originalColor = el.style.color;
                el.style.color = '#ccc'; 
                el.style.transition = 'color 0.2s';
                setTimeout(() => el.style.color = originalColor, 200);
            } catch (err) {
                console.error('Copy failed', err);
            }
        }


        // --- 3. 板塊層級管理 (Z-Index Persistence) ---
        const momentsBox = document.getElementById('moments-box');
        const articlesBox = document.getElementById('articles-box');
        const boxes = [momentsBox, articlesBox];
        const STORAGE_KEY = 'blog_active_box';

        function bringToFront(activeId) {
            boxes.forEach(box => {
                if (box.id === activeId) {
                    box.style.zIndex = 20; // 提昇層級
                    box.classList.add('active');
                } else {
                    box.style.zIndex = 10; // 降低層級
                    box.classList.remove('active');
                }
            });
            // 保存狀態
            localStorage.setItem(STORAGE_KEY, activeId);
        }

        // 綁定事件：移入或點擊時觸發
        boxes.forEach(box => {
            box.addEventListener('mouseenter', () => bringToFront(box.id));
            box.addEventListener('click', () => bringToFront(box.id));
        });

        // 初始化：讀取上次狀態，如果沒有則默認 moments 在前
        const savedId = localStorage.getItem(STORAGE_KEY);
        if (savedId) {
            bringToFront(savedId);
        } else {
            bringToFront('moments-box'); // 默認
        }


        // --- 4. 頁面跳轉 ---
        function openLink(slug) {
            console.log("Opening:", slug);
            // window.location.href = `/posts/${slug}`;
        }

    </script>
</body>
</html>
